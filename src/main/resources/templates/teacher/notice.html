<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>ãŠçŸ¥ã‚‰ã›</title>

	<!-- CSS -->
	<link rel="stylesheet" th:href="@{/notice_css/notice.css}">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
</head>

<body>

	<header>
		<h1><i class="bi bi-bell"></i> ãŠçŸ¥ã‚‰ã›</h1>
		<div class="icons">
<!--			 Dark Mode Toggle ãƒœã‚¿ãƒ³ -->
<!--			<button id="darkModeToggle" style="background:none;border:none;font-size:22px;">-->
<!--				<i id="darkIcon" class="bi bi-moon"></i>-->
<!--			</button>-->
			<a th:href="@{/teacher/settings}"><i class="bi bi-gear"></i> è¨­å®š</a>
			<a th:href="@{/teacher/home}"><i class="bi bi-house"></i> ãƒ›ãƒ¼ãƒ </a>
		</div>

	</header>

	<main>
		<!--     ãŠçŸ¥ã‚‰ã›ä¸€è¦§ãƒªã‚¹ãƒˆ -->
		<section id="notice-list" class="notice-list">
			<div class="list-header">
				<h2>ãŠçŸ¥ã‚‰ã›ä¸€è¦§</h2>
				<button class="new-btn" onclick="showMessageBox()">
					<i class="bi bi-plus-circle"></i> æ–°è¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</button>
			</div>

			<!-- ãŠçŸ¥ã‚‰ã›ãƒ«ãƒ¼ãƒ—éƒ¨åˆ† -->
			<div th:each="notice : ${noticesList}" class="notice-item"
				style="display:flex; align-items:center; justify-content:space-between; gap:12px;">

				<!-- ã‚¿ã‚¤ãƒˆãƒ«-->
				<details class="dropdown" style="flex:1;">
					<summary class="title" th:text="${notice.sessionTitle}" style="cursor:pointer;"></summary>
					<div class="dropdown-content">
						<p th:text="${notice.sessionSub}">ãŠçŸ¥ã‚‰ã›ã®å†…å®¹</p>
					</div>
				</details>

				<!-- å‰Šé™¤ -->
				<form th:action="@{'/teacher/notice/delete/' + ${notice.sessionNoti}}" method="post" style="margin:0;">
					<button type="submit" class="delete-btn" title="å‰Šé™¤" onclick="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');"
						style="background:none; border:none; cursor:pointer;">
						<i class="bi bi-trash"></i></button>
				</form>
			</div>
		</section>

		<!--ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒ æœ€åˆã¯è¡¨ç¤ºã—ãªã„ãƒœã‚¿ãƒ³æŠ¼ã—ãŸå¾Œè¡¨ç¤ºã™ã‚‹  -->
		<section id="message-box" class="message-box" style="display:none;">
			<h2>æ–°è¦ãŠçŸ¥ã‚‰ã›ç™»éŒ²</h2>
			<form th:action="@{/teacher/notice/add}" method="post" th:object="${noticeForm}">
				<input type="text" th:field="*{sessionTitle}" placeholder="ã‚¿ã‚¤ãƒˆãƒ«" required>
				<textarea th:field="*{sessionSub}" placeholder="å†…å®¹ã‚’å…¥åŠ›..." required></textarea>
				<div class="message-actions">
					<button type="button" class="back-btn" onclick="showNoticeList()"> <i class="bi bi-arrow-left"></i>
					</button>
					<button type="submit" class="send-btn"> <i class="bi bi-send"></i> ç™»éŒ²</button>
				</div>
			</form>
		</section>

		<!-- ===== ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ ===== -->
		<aside class="menu">
			<a th:href="@{/teacher/schedule}" th:classappend="${active == 'schedule'} ? ' active' : ''"
				class="menu-link">å¹´é–“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ğŸ“…</a>
			<a th:href="@{/teacher/timetable}" th:classappend="${active == 'timetable'} ? ' active' : ''"
				class="menu-link">æ™‚é–“å‰²ğŸŸ£</a>
			<a th:href="@{/teacher/notices}" th:classappend="${active == 'notices'} ? ' active' : ''"
				class="menu-link">ãŠçŸ¥ã‚‰ã›ğŸ””</a>
			<a th:href="@{/teacher/reports}" th:classappend="${active == 'reports'} ? ' active' : ''"
				class="menu-link">å ±å‘ŠğŸ“¨</a>
		</aside>
	</main>

	<!-- ===== JavaScript è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ===== -->
	<script>
		function showMessageBox() {
			document.getElementById("notice-list").style.display = "none";
			document.getElementById("message-box").style.display = "block";
		}

		function showNoticeList() {
			document.getElementById("message-box").style.display = "none";
			document.getElementById("notice-list").style.display = "block";
		}

	</script>
	<script th:src="@{/js/theme.js}"></script>

</body>

</html>